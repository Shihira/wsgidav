<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="generator" content="WsgiDAV/{{ version }}">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>WsgiDAV - Index of {{ display_path }} </title>

  <link rel="shortcut icon" href="{{ htdocs }}/favicon.ico">
  <link rel="stylesheet" href="{{ htdocs }}/style.css" />
  <link href="https://cdn.staticfile.org/twitter-bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/3.0.0/js/bootstrap.min.js"></script>
</head>

<body>
  <div class="container">
    <h1>
      Index of {{ display_path }}
    </h1>

    <div class="panel panel-default">
      <div class="panel-heading">Add a File</div>
      <div class="panel-body row">
        <div class="form-group col-md-6">
          <form id="upload-form">
            <input id="upload-file" type="file" style="height: 40px" class="form-control"/>
            <br/>
            <button id="upload-button" type="button" class="btn btn-primary">Upload</button>
          </form>
        </div>
        <div class="form-group col-md-6">
          <form id="upload-form">
            <textarea id="download-uri" type="input" class="form-control" placeholder="URI" style="height: 40px"></textarea>
            <br/>
            <button id="download-button" type="button" class="btn btn-primary">Download with Aria</button>
          </form>
        </div>
      </div>
    </div>

    <table class="table table-condensed table-hover">

      <thead>
        <tr>
          <th></th>
          <th>Name</th>
          <th>Size</th>
          <th>Last modified</th>
        </tr>
      </thead>

      <tbody>
        {%- if parent_url %}
        <tr>
          <td>
            <span class="glyphicon glyphicon-folder-open"></span>
          </td>
          <td>
            <a href="{{ parent_url }}">[Parent Directory] ../</a>
          </td>
          <td>-</td>
          <td></td>
        </tr>
        {% endif -%}

        {% for row in rows %}
        <tr>
          {% if row.display_type == "Directory" %}
            <td><span class="glyphicon glyphicon-folder-open command-button"></span></td>
            <td><a href="{{ row.href }}">{{row.display_name}}/</a></td>
          {% else %}
            <td><span class="glyphicon glyphicon-file command-button"></span></td>
            <td><a href="{{ row.href }}">{{row.display_name}}</a></td>
          {% endif %}
          <td>{{ row.str_size }}</td>
          <td>{{ row.str_modified }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <hr>

    {% if trailer %}
    <p class="trailer">{{ trailer }}</p>
    {% endif %}
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="command-dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">File Menu</h4>
          <br/>
          <div class="form-group">
            <textarea type="text" class="form-control" id="command-title" rows="2"></textarea>
          </div>
        </div>
        <div class="modal-body center">
          <a class="btn btn-primary btn-block command-btn" target="_blank" data-ext=".cbz"    data-href="/Pages/ComicReader.html">Open in Comic Reader</a>
          <a class="btn btn-primary btn-block command-btn" target="_blank" data-ext=".md"     data-href="/Pages/Markdown.html"   >Open in Markdown Viewer</a>
          <a class="btn btn-primary btn-block command-btn" target="_blank" data-ext=".sh,.py" data-href="/Pages/ScriptExec.html" >Open in Terminal</a>
          <a class="btn btn-primary btn-block command-btn" target="_blank" data-ext=".torrent" id="download-torrent-button">Download with Aria</a>

          <a class="btn btn-primary btn-block" target="_blank" id="move-button">Move File</a>
          <a class="btn btn-primary btn-block" target="_blank" id="delete-button">Delete File</a>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <script defer src="{{ htdocs }}/script.js"></script>
</body>
</html>
